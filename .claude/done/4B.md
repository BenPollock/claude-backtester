# 4B: Correlation and Sector Analysis -- DONE

## What was implemented

### New file: `src/backtester/analytics/correlation.py`

Five functions for portfolio-level correlation and concentration analysis:

1. **`compute_correlation_matrix`** -- Pairwise Pearson correlation of daily close-to-close returns across tickers. Returns symmetric DataFrame.
2. **`compute_rolling_correlation`** -- Rolling pairwise correlation between two tickers over a configurable window. Returns date-indexed Series.
3. **`compute_hhi`** -- Herfindahl-Hirschman Index from portfolio weights. Measures concentration (1.0 = single position, 1/N = equal weight).
4. **`compute_portfolio_concentration`** -- Full concentration report from market values: weights, HHI, effective N, max weight + ticker.
5. **`compute_sector_exposure`** -- Aggregates positions by sector using a ticker-to-sector mapping. Returns DataFrame with sector, total_value, weight, ticker_count.

### New file: `tests/test_correlation.py`

26 tests covering all five functions:
- **Correlation matrix (7)**: perfect positive, perfect negative, uncorrelated, single ticker, ticker subset, symmetry, empty input
- **Rolling correlation (3)**: basic calculation, window size effects, identical series
- **HHI (5)**: equal weights, fully concentrated, realistic portfolio, 60/40 split, empty
- **Portfolio concentration (5)**: multiple positions, single position, equal positions, empty, zero total value
- **Sector exposure (6)**: multiple sectors, unknown tickers, single sector, empty positions, sort order, all unknown

## Edge cases handled

- Empty dicts (price_data, positions, weights) return sensible defaults
- Single-ticker correlation returns 1x1 matrix
- Zero total portfolio value avoids division by zero
- Missing sector mappings fall back to "Unknown"
- All functions use only pandas/numpy (no new dependencies)

## No existing files modified
